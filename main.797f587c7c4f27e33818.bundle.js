/*! For license information please see main.797f587c7c4f27e33818.bundle.js.LICENSE.txt */
(()=>{var e,t={437:(e,t,s)=>{"use strict";s(260);class i extends Phaser.GameObjects.Text{constructor(e){super(e,10,10,"",{color:"black",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0)}update(){this.setText(`fps: ${Math.floor(this.scene.game.loop.actualFps)}`)}}const r={Depths:{TILE:0},TILE_SIZE:85,Keys:{Textures:{Car:{Red:{NORTH_WEST:"north-west-red",NORTH_EAST:"north-east-red",SOUTH_WEST:"south-west-red",SOUTH_EAST:"south-east-red"},Blue:{NORTH_WEST:"north-west-blue",NORTH_EAST:"north-east-blue",SOUTH_WEST:"south-west-blue",SOUTH_EAST:"south-east-blue"},Green:{NORTH_WEST:"north-west-green",NORTH_EAST:"north-east-green",SOUTH_WEST:"south-west-green",SOUTH_EAST:"south-east-green"},Lemon:{NORTH_WEST:"north-west-lemon",NORTH_EAST:"north-east-lemon",SOUTH_WEST:"south-west-lemon",SOUTH_EAST:"south-east-lemon"},Orange:{NORTH_WEST:"north-west-orange",NORTH_EAST:"north-east-orange",SOUTH_WEST:"south-west-orange",SOUTH_EAST:"south-east-orange"},Violet:{NORTH_WEST:"north-west-violet",NORTH_EAST:"north-east-violet",SOUTH_WEST:"south-west-violet",SOUTH_EAST:"south-east-violet"}},Blocker:{BARREL:"barrel",HYDRANT:"hydrant",MAIL_BOX:"mail-box",PLANT_POT:"plant-pot",RECYCLE_BIN:"recycle-bin",TRAFFIC_CONE:"traffic-cone"},Tile:{ONE:"tile-1",TWO:"tile-2",THREE:"tile-3",FOUR:"tile-4",DIRTY:"dirty-tile",CLEAN:"clean-tile",UNIT:"unit-tile"}}},TransformedCoordinate:{TRANSFORMED_I_HAT:new Phaser.Math.Vector2(39.5,19),TRANSFORMED_J_HAT:new Phaser.Math.Vector2(-22.5,34)},PIVOT_POSITION:new Phaser.Math.Vector2(440,80),TWEEN_SPEED:100,Swipe:{SWIPE_MIN_DISTANCE:50,SWIPE_EPSILON:.5}};var o;!function(e){e[e.NULL=-1]="NULL",e[e.EMPTY=0]="EMPTY",e[e.GREEN=1]="GREEN",e[e.LEMON=2]="LEMON",e[e.ORANGE=3]="ORANGE",e[e.RED=4]="RED",e[e.BLUE=5]="BLUE",e[e.VIOLET=6]="VIOLET",e[e.BLOCKER=7]="BLOCKER",e[e.GRANDMA=8]="GRANDMA"}(o||(o={}));const n=o,a=new class{constructor(){this.cars=[],this.exitedCarNum=0}push(e){this.cars.push(e)}didAllCarExit(){return this.exitedCarNum===this.cars.length&&this.cars.length>0}toArray(){return this.cars}clearAllCars(){this.cars.forEach((e=>null==e?void 0:e.destroy())),this.cars=[],this.exitedCarNum=0}increaseExitedCarNum(){console.log("exit"),this.exitedCarNum++,console.log(this.exitedCarNum),console.log(this.cars.length)}},{TRANSFORMED_I_HAT:l,TRANSFORMED_J_HAT:h}=r.TransformedCoordinate,{TWEEN_SPEED:c}=r;class g{constructor(e){this.car=e,this.scene=this.car.scene}playVerticalMovingAnimation(e,t){this.car.getIsVertical()&&(this.car.didExit()&&(t+=this.car.getLength()),this.playMovingAnimation(h.clone(),e,t))}playHorizontalMovingAnimation(e,t){this.car.getIsVertical()||(this.car.didExit()&&(t+=this.car.getLength()),this.playMovingAnimation(l.clone(),e,t))}playMovingAnimation(e,t,s){this.car.setMoving(!0);const i=new Phaser.Math.Vector2(this.car.x,this.car.y),r=t?s:-s,o=e.scale(r),n=i.add(o),a=this.scene.add.tween({targets:this.car,x:n.x,y:n.y,duration:c*s,ease:Phaser.Math.Easing.Sine.InOut,onComplete:()=>{this.car.setMoving(!1),this.car.didExit()?this.playDisappearingAnimation():this.car.initDepth()}});this.car.setMoveTween(a)}playDisappearingAnimation(){this.scene.add.tween({targets:this.car,alpha:0,duration:500,ease:Phaser.Math.Easing.Sine.InOut,onComplete:()=>{a.didAllCarExit()&&this.scene.showWinPopup()}})}}const d=[n.BLUE,n.GREEN,n.LEMON,n.ORANGE,n.RED,n.VIOLET];d.push(n.BLOCKER);const u=d;function T(e,t){return new Phaser.Math.Vector2(e.x+t.x,e.y+t.y)}const{TRANSFORMED_I_HAT:m,TRANSFORMED_J_HAT:p}=r.TransformedCoordinate;function E(e){return new Phaser.Math.Vector2(e.row*p.x+e.column*m.x,e.row*p.y+e.column*m.y)}const S=new class{constructor(){this.levelIndex=0,this.levelConfigs=[]}addLevel(e){this.levelConfigs.push(e)}getLevel(){return this.levelConfigs[this.levelIndex]}getLevelIndex(){return this.levelIndex}setLevelIndex(e){e>=this.levelConfigs.length?this.levelIndex=0:this.levelIndex=e}increaseLevelIndex(e=1){this.setLevelIndex(this.levelIndex+e)}getMaxLevelIndex(){return this.levelConfigs.length-1}getLevelConfigsLength(){return this.levelConfigs.length}isOutOfAutoGeneratedLevels(){return this.levelIndex==this.levelConfigs.length-1}},O=S,{PIVOT_POSITION:v}=r;class f extends Phaser.GameObjects.Image{constructor(e,t,s,i){super(e,0,0,i),this.boardPosition=t,this.isVertical=s,this.exited=!1,this.initWorldPosition(),this.initRotation(),this.initDepth(),this.setOverlapTilesState(this.getTileState()),e.add.existing(this)}didExit(){return this.exited}getBoardPosition(){return this.boardPosition}getIsVertical(){return this.isVertical}initWorldPosition(){const e=T(function(e,t,s,i){let r=0,o=0;return i?(r=(s-2)/2+1/4,o=(t-1)/2):(o=(s-1)/2-1/4,r=(t-1)/2-1/4),E({row:e.row+r,column:e.column+o})}(this.boardPosition,this.getWidth(),this.getLength(),this.isVertical),v);this.x=e.x,this.y=e.y}initRotation(){this.angle=this.isVertical?-60:30}initDepth(){const{columns:e}=O.getLevel().boardSize;this.setDepth(e*this.boardPosition.row+this.boardPosition.column)}canTileBlockRectangle(e){return u.includes(e)}moveHorizontally(e){const t=e?this.computeTravelingBoardDistanceRight():this.computeTravelingBoardDistanceLeft();this.resetOverlapTilesHorizontal(e,t)}moveVertically(e){const t=e?this.computeTravelingBoardDistanceDown():this.computeTravelingBoardDistanceUp();this.resetOverlapTilesVertical(e,t)}computeTravelingBoardDistanceRight(){if(this.exited)return 0;if(this.isVertical)return 0;const e=this.scene,t=this.getFrontTiles(),s=t[0].column;let i=s;for(;;){i++;let s=!1,r=!1;for(const o of t){const t={row:o.row,column:i},a=e.getBoardManager().getTileState(t);if(this.canTileBlockRectangle(a)){s=!0,r=!1;break}r=a===n.NULL}if(s)break;if(r){this.executeExit();break}}return i-1-s}computeTravelingBoardDistanceLeft(){if(this.exited)return 0;if(this.isVertical)return 0;const e=this.scene.getBoardManager(),t=this.getRearTiles(),s=t[0].column;let i=s;for(;;){i--;let s=!1,r=!1;for(const o of t){const t={row:o.row,column:i},a=e.getTileState(t);if(this.canTileBlockRectangle(a)){s=!0,r=!1;break}r=a===n.NULL}if(s)break;if(r){this.executeExit();break}}return s-(i+1)}computeTravelingBoardDistanceDown(){if(this.exited)return 0;if(!this.isVertical)return 0;const e=this.scene.getBoardManager(),t=this.getFrontTiles(),s=t[0].row;let i=s;for(;;){i++;let s=!1,r=!1;for(const o of t){const t={row:i,column:o.column},a=e.getTileState(t);if(this.canTileBlockRectangle(a)){s=!0,r=!1;break}r=a===n.NULL}if(s)break;if(r){this.executeExit();break}}return i-1-s}computeTravelingBoardDistanceUp(){if(this.exited)return 0;if(!this.isVertical)return 0;const e=this.scene.getBoardManager(),t=this.getRearTiles(),s=t[0].row;let i=s;for(;;){i--;let s=!1,r=!1;for(const o of t){const t={row:i,column:o.column},a=e.getTileState(t);if(this.canTileBlockRectangle(a)){s=!0,r=!1;break}r=a===n.NULL}if(s)break;if(r){this.executeExit();break}}return s-(i+1)}setOverlapTilesState(e){const t=this.scene;this.getOverlapTiles().forEach((s=>{t.getBoardManager().getTileState(s)!==n.NULL?t.getBoardManager().setTileState(s,e):console.log(`${s.row} ${s.column} is null`)}))}resetOverlapTilesVertical(e,t){this.setOverlapTilesState(n.EMPTY),this.exited||(e?this.boardPosition.row+=t:this.boardPosition.row-=t,this.setOverlapTilesState(this.getTileState()))}resetOverlapTilesHorizontal(e,t){this.setOverlapTilesState(n.EMPTY),this.exited||(e?this.boardPosition.column+=t:this.boardPosition.column-=t,this.setOverlapTilesState(this.getTileState()))}getRearTiles(){const e=[];if(this.exited)return e;if(this.isVertical)for(let t=this.boardPosition.column;t<this.boardPosition.column+this.getWidth();t++){const s={row:this.boardPosition.row,column:t};e.push(s)}else for(let t=this.boardPosition.row;t<this.boardPosition.row+this.getWidth();t++){const s={row:t,column:this.boardPosition.column};e.push(s)}return e}getFrontTiles(){const e=[];if(this.exited)return e;if(this.isVertical)for(let t=this.boardPosition.column;t<this.boardPosition.column+this.getWidth();t++){const s={row:this.boardPosition.row+this.getLength()-1,column:t};e.push(s)}else for(let t=this.boardPosition.row;t<this.boardPosition.row+this.getWidth();t++){const s={row:t,column:this.boardPosition.column+this.getLength()-1};e.push(s)}return e}getOverlapTiles(){const e=[];if(this.isVertical)for(let t=this.boardPosition.row;t<this.boardPosition.row+this.getLength();t++)for(let s=this.boardPosition.column;s<this.boardPosition.column+this.getWidth();s++){const i={row:t,column:s};e.push(i)}else for(let t=this.boardPosition.row;t<this.boardPosition.row+this.getWidth();t++)for(let s=this.boardPosition.column;s<this.boardPosition.column+this.getLength();s++){const i={row:t,column:s};e.push(i)}return e}executeExit(){this.exited=!0}}const{TRANSFORMED_I_HAT:b,TRANSFORMED_J_HAT:w}=r.TransformedCoordinate,{SWIPE_MIN_DISTANCE:R,SWIPE_EPSILON:_}=r.Swipe;class x extends f{constructor(e,t,s,i){super(e,t,i,s),this.handleDragging=(e,t,s)=>{if(this.moveTween)return;if(this.isMoving)return;const i=t-this.x,r=s-this.y,o=new Phaser.Math.Vector2(i,r);if(o.length()<R)return;const n=o.clone().normalize();if(this.isVertical){const e=w.clone().normalize();if(e.fuzzyEquals(n,_)&&r>0)return void this.moveVertically(!0);if(e.fuzzyEquals(n.scale(-1),_)&&r<0)return void this.moveVertically(!1)}else{const e=b.clone().normalize();if(e.fuzzyEquals(n,_)&&i>0)return void this.moveHorizontally(!0);if(e.fuzzyEquals(n.scale(-1),_)&&i<0)return void this.moveHorizontally(!1)}},this.isMoving=!1,this.createAnimator(),this.initInteractive(),e.add.existing(this),a.push(this)}setMoving(e){this.isMoving=e}setMoveTween(e){this.moveTween=e}createAnimator(){this.animator=new g(this)}initInteractive(){this.setInteractive(),this.scene.input.setDraggable(this),this.createDraggingEventListeners()}createDraggingEventListeners(){this.on(Phaser.Input.Events.DRAG,this.handleDragging),this.on(Phaser.Input.Events.DRAG_END,(()=>{this.moveTween=void 0}))}moveVertically(e){if(!this.isVertical)return;this.exited&&this.removeInteractive();const t=e?this.computeTravelingBoardDistanceDown():this.computeTravelingBoardDistanceUp();this.resetOverlapTilesVertical(e,t),this.animator.playVerticalMovingAnimation(e,t)}moveHorizontally(e){if(this.isVertical)return;this.exited&&this.removeInteractive();const t=e?this.computeTravelingBoardDistanceRight():this.computeTravelingBoardDistanceLeft();this.resetOverlapTilesHorizontal(e,t),this.animator.playHorizontalMovingAnimation(e,t)}executeExit(){super.executeExit(),a.increaseExitedCarNum()}checkCollisionWithBoss(){}}const{Textures:A}=r.Keys;class N extends x{constructor(e,t,s,i=!1){let r;r=s?i?A.Car.Red.NORTH_EAST:A.Car.Red.SOUTH_WEST:i?A.Car.Red.NORTH_WEST:A.Car.Red.SOUTH_EAST,super(e,t,r,s)}getTileState(){return n.RED}getWidth(){return 2}getLength(){return 4}}const{Textures:L}=r.Keys;class P extends x{constructor(e,t,s,i=!1){let r;r=s?i?L.Car.Blue.NORTH_EAST:L.Car.Blue.SOUTH_WEST:i?L.Car.Blue.NORTH_WEST:L.Car.Blue.SOUTH_EAST,super(e,t,r,s)}getTileState(){return n.BLUE}getWidth(){return 2}getLength(){return 5}}const{Textures:y}=r.Keys;class C extends x{constructor(e,t,s,i=!1){let r;r=s?i?y.Car.Green.NORTH_EAST:y.Car.Green.SOUTH_WEST:i?y.Car.Green.NORTH_WEST:y.Car.Green.SOUTH_EAST,super(e,t,r,s)}getTileState(){return n.GREEN}getWidth(){return 2}getLength(){return 3}}const{Textures:I}=r.Keys;class H extends x{constructor(e,t,s,i=!1){let r;r=s?i?I.Car.Lemon.NORTH_EAST:I.Car.Lemon.SOUTH_WEST:i?I.Car.Lemon.NORTH_WEST:I.Car.Lemon.SOUTH_EAST,super(e,t,r,s)}getTileState(){return n.LEMON}getWidth(){return 2}getLength(){return 3}}const{Textures:B}=r.Keys;class M extends x{constructor(e,t,s,i=!1){let r;r=s?i?B.Car.Orange.NORTH_EAST:B.Car.Orange.SOUTH_WEST:i?B.Car.Orange.NORTH_WEST:B.Car.Orange.SOUTH_EAST,super(e,t,r,s)}getTileState(){return n.ORANGE}getWidth(){return 2}getLength(){return 6}}const{Textures:k}=r.Keys;class V extends x{constructor(e,t,s,i=!1){let r;r=s?i?k.Car.Violet.NORTH_EAST:k.Car.Violet.SOUTH_WEST:i?k.Car.Violet.NORTH_WEST:k.Car.Violet.SOUTH_EAST,super(e,t,r,s)}getTileState(){return n.VIOLET}getWidth(){return 3}getLength(){return 4}}const{TILE_SIZE:U,PIVOT_POSITION:W}=r,D={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},{Textures:G}=r.Keys,z=r.PIVOT_POSITION,{TILE:j}=r.Depths;class F extends Phaser.GameObjects.Image{constructor(e,t,s=G.Tile.UNIT){const i=T(E(t),z);super(e,i.x,i.y,s),this.setDepth(j),this.boardPos=t,e.add.existing(this)}}class K{constructor(e){this.scene=e,this.tiles=[]}createTileGrid(){const{rows:e,columns:t}=O.getLevel().boardSize;for(let s=0;s<e;s++)for(let i=0;i<t;i++){const r=new F(this.scene,{row:s,column:i});this.tiles.push(r),s==Math.floor(e/2)&&i==Math.floor(t/2)&&(this.middleTile=r)}}clearAllTiles(){var e;null===(e=this.tiles)||void 0===e||e.forEach((e=>null==e?void 0:e.destroy())),this.tiles=[]}getAdditionalVector(){const{centerX:e,centerY:t}=this.scene.cameras.main;return new Phaser.Math.Vector2(e-this.middleTile.x,t-this.middleTile.y)}rePositionTilesToCenter(){const e=this.getAdditionalVector();for(const t of this.tiles){const s=new Phaser.Math.Vector2(t.x,t.y);s.add(e),t.setPosition(s.x,s.y)}return e}}const{STATUS:Y}=D,{STATUS:q}=D;class J extends class{constructor(e){this.scene=e}init(){this.setState(Y.READY)}start(){this.isRunning()||this.setState(Y.RUNNING)}stop(){this.isRunning()&&this.setState(Y.STOPPED)}setState(e){this.state=e}isReady(){return this.state===Y.READY}isRunning(){return this.state===Y.RUNNING}isStopped(){return this.state===Y.STOPPED}}{constructor(e){super(e),this.tileGrid=new K(e)}init(){this.clearAllTiles(),super.init()}start(){this.isRunning()||(this.generateBoard(),this.setState(q.RUNNING))}generateBoard(){const{rows:e,columns:t}=O.getLevel().boardSize;this.tileGrid.createTileGrid();for(let s=0;s<e;s++){this.boardArray[s]=[];for(let e=0;e<t;e++)this.boardArray[s][e]=n.EMPTY}}getAdditionalVector(){return this.additionalVector}setTileState(e,t){this.getTileState(e)!=n.NULL&&(this.boardArray[e.row][e.column]=t)}getTileState(e){const{boardSize:t}=O.getLevel();return e.row>=0&&e.row<t.rows&&e.column>=0&&e.column<t.columns?this.boardArray[e.row][e.column]:n.NULL}printBoard(){console.log(this.boardArray)}clearAllTiles(){var e;null===(e=this.tileGrid)||void 0===e||e.clearAllTiles(),this.boardArray=[]}longestEmptySubarrayOnTiles(e){const t=[],s=[];let i=!1;for(let r=0;r<e.length;r++)this.getTileState(e[r])==n.EMPTY?i||(t.push(r),i=!0):i&&(s.push(r-1),i=!1);t.length!=s.length&&s.push(e.length-1);let r=0,o=0;for(let e=0;e<t.length;e++)s[e]-t[e]>=1&&(r=t[e],o=s[e]);return e.slice(r,o+1)}longestEmptyTileSubarrayOnTopSide(){const{boardSize:e}=O.getLevel(),t=[];for(let s=0;s<e.columns;s++)t.push({row:0,column:s});return this.longestEmptySubarrayOnTiles(t)}longestEmptyTileSubarrayOnBottomSide(){const{boardSize:e}=O.getLevel(),t=[];for(let s=0;s<e.columns;s++)t.push({row:e.rows-1,column:s});return this.longestEmptySubarrayOnTiles(t)}longestEmptyTileSubarrayOnLeftSide(){const{boardSize:e}=O.getLevel(),t=[];for(let s=0;s<e.rows;s++)t.push({row:s,column:0});return this.longestEmptySubarrayOnTiles(t)}longestEmptyTileSubarrayOnRightSide(){const{boardSize:e}=O.getLevel(),t=[];for(let s=0;s<e.rows;s++)t.push({row:s,column:e.columns-1});return this.longestEmptySubarrayOnTiles(t)}}var X;!function(e){e.BLUE="blue",e.GREEN="green",e.LEMON="lemon",e.ORANGE="orange",e.RED="red",e.VIOLET="violet"}(X||(X={}));const $=X;var Z;!function(e){e.TRAFFIC_CONE="traffic-corn"}(Z||(Z={}));const Q=Z,ee=new class{constructor(){this.blockers=[],this.blockersAtExit=[]}push(e,t=!1){this.blockers.push(e),t&&this.blockersAtExit.push(e)}toArray(){return this.blockers}clearAllBlocker(){this.blockers.forEach((e=>null==e?void 0:e.destroy())),this.blockers=[],this.blockersAtExit=[]}deleteBlocker(e){const t=this.blockers.indexOf(e);-1!==t&&this.blockers.splice(t,1),-1!==t&&this.blockersAtExit.splice(t,1)}getBlockersAtExit(){return this.blockersAtExit}},te=r.PIVOT_POSITION;class se extends Phaser.GameObjects.Image{constructor(e,t,s){const i=T(E(t),te);super(e,i.x,i.y,s);const{columns:r}=O.getLevel().boardSize;this.setDepth(r*t.row+t.column),this.boardPosition=t,e.add.existing(this),this.setOverlapTileState(n.BLOCKER),ee.push(this)}setOverlapTileState(e){const t=this.scene;null==t||t.getBoardManager().setTileState(this.boardPosition,e)}getBoardPosition(){return this.boardPosition}}const{Blocker:ie}=r.Keys.Textures;class re extends se{constructor(e,t){const{row:s,column:i}=t,{rows:r,columns:o}=O.getLevel().boardSize;let n,a={x:.5,y:.5};if(s>=1&&s<=r-2&&i>=1&&i<=o-2)switch((s+i)%5){case 0:n=ie.BARREL,a={x:.4,y:.75};break;case 1:n=ie.HYDRANT,a={x:.4,y:.75};break;case 2:n=ie.MAIL_BOX,a={x:.5,y:.7};break;case 3:n=ie.PLANT_POT,a={x:.5,y:.75};break;default:n=ie.RECYCLE_BIN,a={x:.4,y:.75}}else n=ie.TRAFFIC_CONE;super(e,t,n),this.setOrigin(a.x,a.y)}}function oe(e,t){t.cameras.main.fadeOut(500),t.time.addEvent({delay:500,callback:function(){t.cameras.main.fadeIn(500),e()},callbackScope:t})}const ne=r.PIVOT_POSITION;class ae extends Phaser.Scene{constructor(){super({key:"MainScene"}),this.hasWinPopupShown=!1,this.hasGameOverPopupShown=!1}init(){var e;this.hasWinPopupShown=!1,this.hasGameOverPopupShown=!1,null===(e=this.boardManager)||void 0===e||e.init(),a.clearAllCars(),ee.clearAllBlocker()}create(){this.fpsText=new i(this),this.add.text(this.cameras.main.width-15,15,`Phaser v${Phaser.VERSION}`,{color:"#000000",fontSize:"24px"}).setOrigin(1,0),this.boardManager=new J(this),this.boardManager.init(),this.boardManager.start();const{cars:e,blockers:t}=O.getLevel();e.forEach((e=>this.genCar(e))),t.forEach((e=>this.genBlocker(e)));const{rows:s,columns:r}=O.getLevel().boardSize,o=T(E({row:Math.floor(s/2),column:Math.floor(r/2)}),ne);this.cameras.main.centerOn(o.x,o.y),this.cameras.main.zoomTo(function(e){const{rows:t,columns:s}=O.getLevel().boardSize,i=T(E({row:t-1,column:0}),W),r=T(E({row:0,column:s-1}),W),o=T(E({row:0,column:0}),W),n=T(E({row:t-1,column:s-1}),W),a=Math.abs(r.x-i.x)+U,l=Math.abs(n.y-o.y)+U,h=e.game.config.height,c=e.game.config.width;return h>c?c/a/1.1:h/l/1.1}(this)),this.setControls(),this.boardManager.printBoard(),console.log(a.toArray())}genCar(e){const t=e.boardPosition,s=e.isVertical,i=Math.random()<.5;let r;switch(e.type){case $.BLUE:r=new P(this,t,s,i);break;case $.ORANGE:r=new M(this,t,s,i);break;case $.RED:r=new N(this,t,s,i);break;case $.VIOLET:r=new V(this,t,s,i);break;case $.GREEN:r=new C(this,t,s,i);break;case $.LEMON:default:r=new H(this,t,s,i)}return r}genBlocker(e){const t=e.boardPosition;let s;return e.type,Q.TRAFFIC_CONE,s=new re(this,t),s}rePositionCars(){const e=a.toArray(),t=this.boardManager.getAdditionalVector();for(const s of e){const e=new Phaser.Math.Vector2(s.x,s.y);e.add(t),s.setPosition(e.x,e.y)}}setControls(){const e=this.input.keyboard.createCursorKeys();this.controls=new Phaser.Cameras.Controls.SmoothedKeyControl({camera:this.cameras.main,left:e.left,right:e.right,up:e.up,down:e.down,zoomIn:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.Q),zoomOut:this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.E),acceleration:.06,drag:5e-4,maxSpeed:1})}getBoardManager(){return this.boardManager}showWinPopup(){this.hasWinPopupShown||(console.log("WIN!!!"),this.hasWinPopupShown=!0,oe((()=>{O.increaseLevelIndex(),this.scene.restart()}),this))}showGameOverPopup(){this.hasGameOverPopupShown||(console.log("GAME OVER :("),this.hasGameOverPopupShown=!0,oe((()=>{this.scene.restart()}),this))}update(e,t){this.fpsText.update(),this.controls.update(t)}}const{Textures:le}=r.Keys;class he extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image(le.Tile.ONE,"assets/img/Tiles-1-min.png"),this.load.image(le.Tile.TWO,"assets/img/Tiles-2-min.png"),this.load.image(le.Tile.THREE,"assets/img/Tiles-3-min.png"),this.load.image(le.Tile.FOUR,"assets/img/Tiles-4-min.png"),this.load.image(le.Tile.DIRTY,"assets/img/DirtyTile.png"),this.load.image(le.Tile.CLEAN,"assets/img/CleanTile.png"),this.load.image(le.Tile.UNIT,"assets/img/Tiles 5-min.png"),this.load.image(le.Car.Red.NORTH_WEST,"assets/img/new/Red car 1_otp2.png"),this.load.image(le.Car.Red.SOUTH_EAST,"assets/img/new/Red car 2_otp2.png"),this.load.image(le.Car.Red.NORTH_EAST,"assets/img/new/Red car 3_otp2.png"),this.load.image(le.Car.Red.SOUTH_WEST,"assets/img/new/Red car 4_otp2.png"),this.load.image(le.Car.Blue.NORTH_WEST,"assets/img/new/Blue car 3-min.png"),this.load.image(le.Car.Blue.SOUTH_EAST,"assets/img/new/Blue car 4-min.png"),this.load.image(le.Car.Blue.NORTH_EAST,"assets/img/new/Blue car 2-min.png"),this.load.image(le.Car.Blue.SOUTH_WEST,"assets/img/new/Blue car 1-min.png"),this.load.image(le.Car.Green.NORTH_WEST,"assets/img/new/Green car 4-min.png"),this.load.image(le.Car.Green.SOUTH_EAST,"assets/img/new/Green car 3-min.png"),this.load.image(le.Car.Green.NORTH_EAST,"assets/img/new/Green car 1-min.png"),this.load.image(le.Car.Green.SOUTH_WEST,"assets/img/new/Green car 2-min.png"),this.load.image(le.Car.Lemon.NORTH_WEST,"assets/img/new/Lemon car 1-min.png"),this.load.image(le.Car.Lemon.SOUTH_EAST,"assets/img/new/Lemon car 3-min.png"),this.load.image(le.Car.Lemon.NORTH_EAST,"assets/img/new/Lemon car 2-min.png"),this.load.image(le.Car.Lemon.SOUTH_WEST,"assets/img/new/Lemon car 4-min.png"),this.load.image(le.Car.Orange.NORTH_WEST,"assets/img/new/Or car 1-min.png"),this.load.image(le.Car.Orange.SOUTH_EAST,"assets/img/new/Or car 2-min.png"),this.load.image(le.Car.Orange.NORTH_EAST,"assets/img/new/Or car 3-min.png"),this.load.image(le.Car.Orange.SOUTH_WEST,"assets/img/new/Or car 4-min.png"),this.load.image(le.Car.Violet.NORTH_WEST,"assets/img/new/Violet car 2-min.png"),this.load.image(le.Car.Violet.SOUTH_EAST,"assets/img/new/Violet car 3-min.png"),this.load.image(le.Car.Violet.NORTH_EAST,"assets/img/new/Violet car 1-min.png"),this.load.image(le.Car.Violet.SOUTH_WEST,"assets/img/new/Violet car 4-min.png"),this.load.image(le.Blocker.BARREL,"assets/img/blockers/barrel.png"),this.load.image(le.Blocker.HYDRANT,"assets/img/blockers/hydrant.png"),this.load.image(le.Blocker.MAIL_BOX,"assets/img/blockers/mail-box.png"),this.load.image(le.Blocker.PLANT_POT,"assets/img/blockers/plant-pot.png"),this.load.image(le.Blocker.RECYCLE_BIN,"assets/img/blockers/recycle-bin.png"),this.load.image(le.Blocker.TRAFFIC_CONE,"assets/img/blockers/traffic-cone.png"),this.load.json("level0","assets/levels/level_0.json"),this.load.json("level1","assets/levels/level_1.json"),this.load.json("level2","assets/levels/level_2.json"),this.load.json("big_level1","assets/levels/big_level1.json"),this.load.json("big_level2","assets/levels/big_level2.json"),this.load.json("big_level3","assets/levels/big_level3.json")}create(){this.scene.start("MainScene");const e=this.cache.json.get("level0"),t=this.cache.json.get("level1"),s=this.cache.json.get("level2"),i=this.cache.json.get("big_level1"),r=this.cache.json.get("big_level2"),o=this.cache.json.get("big_level3");O.addLevel(e),O.addLevel(t),O.addLevel(s),O.addLevel(i),O.addLevel(r),O.addLevel(o),O.setLevelIndex(0)}}const ce={type:Phaser.AUTO,backgroundColor:"#ffffff",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:960,height:1554},scene:[he,ae]};window.addEventListener("load",(()=>{new Phaser.Game(ce)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(e){var r=s[e];if(void 0!==r)return r.exports;var o=s[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,s,r,o)=>{if(!s){var n=1/0;for(c=0;c<e.length;c++){for(var[s,r,o]=e[c],a=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((e=>i.O[e](s[l])))?s.splice(l--,1):(a=!1,o<n&&(n=o));if(a){e.splice(c--,1);var h=r();void 0!==h&&(t=h)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,r,o]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var r,o,[n,a,l]=s,h=0;if(n.some((t=>0!==e[t]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)var c=l(i)}for(t&&t(s);h<n.length;h++)o=n[h],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(437)));var r=i.O(void 0,[216],(()=>i(204)));r=i.O(r)})();